<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker常用容器 | jasvtfvan前端博客</title>
    <meta name="description" content="欢迎来到我的前端工厂">
    <link rel="icon" href="/fe-blog/github.ico">
    
    <link rel="preload" href="/fe-blog/assets/css/0.styles.68cfcd3e.css" as="style"><link rel="preload" href="/fe-blog/assets/js/app.8a3559bf.js" as="script"><link rel="preload" href="/fe-blog/assets/js/2.fbf19223.js" as="script"><link rel="preload" href="/fe-blog/assets/js/27.b0579100.js" as="script"><link rel="prefetch" href="/fe-blog/assets/js/10.399f0c01.js"><link rel="prefetch" href="/fe-blog/assets/js/11.08202412.js"><link rel="prefetch" href="/fe-blog/assets/js/12.cfc10ac9.js"><link rel="prefetch" href="/fe-blog/assets/js/13.bdceb3a3.js"><link rel="prefetch" href="/fe-blog/assets/js/14.0c886dba.js"><link rel="prefetch" href="/fe-blog/assets/js/15.f5d42d2e.js"><link rel="prefetch" href="/fe-blog/assets/js/16.19c927b2.js"><link rel="prefetch" href="/fe-blog/assets/js/17.cc368339.js"><link rel="prefetch" href="/fe-blog/assets/js/18.99786a0e.js"><link rel="prefetch" href="/fe-blog/assets/js/19.2c96aa8f.js"><link rel="prefetch" href="/fe-blog/assets/js/20.feb358f9.js"><link rel="prefetch" href="/fe-blog/assets/js/21.854b8672.js"><link rel="prefetch" href="/fe-blog/assets/js/22.78adf0af.js"><link rel="prefetch" href="/fe-blog/assets/js/23.a8c123d2.js"><link rel="prefetch" href="/fe-blog/assets/js/24.65de2737.js"><link rel="prefetch" href="/fe-blog/assets/js/25.21f6581b.js"><link rel="prefetch" href="/fe-blog/assets/js/26.19b2e629.js"><link rel="prefetch" href="/fe-blog/assets/js/28.a0c1bad8.js"><link rel="prefetch" href="/fe-blog/assets/js/29.3869f6fd.js"><link rel="prefetch" href="/fe-blog/assets/js/3.a5dd7d81.js"><link rel="prefetch" href="/fe-blog/assets/js/30.be6becb7.js"><link rel="prefetch" href="/fe-blog/assets/js/31.e027926c.js"><link rel="prefetch" href="/fe-blog/assets/js/32.dd112bea.js"><link rel="prefetch" href="/fe-blog/assets/js/33.2cdeb0bd.js"><link rel="prefetch" href="/fe-blog/assets/js/34.2eb22cbc.js"><link rel="prefetch" href="/fe-blog/assets/js/35.a1660bb3.js"><link rel="prefetch" href="/fe-blog/assets/js/36.3d49d679.js"><link rel="prefetch" href="/fe-blog/assets/js/37.2c728d3e.js"><link rel="prefetch" href="/fe-blog/assets/js/38.5b00cff3.js"><link rel="prefetch" href="/fe-blog/assets/js/39.bc2ccb29.js"><link rel="prefetch" href="/fe-blog/assets/js/4.54c72001.js"><link rel="prefetch" href="/fe-blog/assets/js/40.fe52d14c.js"><link rel="prefetch" href="/fe-blog/assets/js/41.da19c7de.js"><link rel="prefetch" href="/fe-blog/assets/js/42.82780c8a.js"><link rel="prefetch" href="/fe-blog/assets/js/43.ea864644.js"><link rel="prefetch" href="/fe-blog/assets/js/44.683e33ca.js"><link rel="prefetch" href="/fe-blog/assets/js/45.6ebdb1c6.js"><link rel="prefetch" href="/fe-blog/assets/js/46.d152d9d1.js"><link rel="prefetch" href="/fe-blog/assets/js/5.7519b52c.js"><link rel="prefetch" href="/fe-blog/assets/js/6.60bc9110.js"><link rel="prefetch" href="/fe-blog/assets/js/7.583a8196.js"><link rel="prefetch" href="/fe-blog/assets/js/8.b04d2cae.js"><link rel="prefetch" href="/fe-blog/assets/js/9.f4b536f6.js">
    <link rel="stylesheet" href="/fe-blog/assets/css/0.styles.68cfcd3e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/fe-blog/" class="home-link router-link-active"><!----> <span class="site-name">jasvtfvan前端博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/fe-blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">微信平台</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>公众号</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-blog/wechat/serviceaccount/local-debug.html" class="nav-link">本地调试</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">javascript</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-blog/javascript/regexp/" class="nav-link">正则表达式</a></li><li class="dropdown-item"><!----> <a href="/fe-blog/javascript/highlights/" class="nav-link">基础集锦</a></li><li class="dropdown-item"><!----> <a href="/fe-blog/javascript/promise/" class="nav-link">promise</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">主流框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>vue2</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-blog/frame/vue2/source/observer.html" class="nav-link">框架源码</a></li><li class="dropdown-subitem"><a href="/fe-blog/frame/vue2/application/base.html" class="nav-link">框架应用</a></li></ul></li><li class="dropdown-item"><h4>react</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-blog/frame/react15/source/native.html" class="nav-link">react15源码</a></li><li class="dropdown-subitem"><a href="/fe-blog/frame/react16/source/fiber.html" class="nav-link">react16源码</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具环境</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-blog/enviroment/tools/git/" class="nav-link">git/git-flow</a></li><li class="dropdown-subitem"><a href="/fe-blog/enviroment/tools/node/" class="nav-link">node工具</a></li></ul></li><li class="dropdown-item"><h4>系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-blog/enviroment/os/centos/mnt.html" class="nav-link">centOS</a></li><li class="dropdown-subitem"><a href="/fe-blog/enviroment/os/centos/cmd.html" class="nav-link">linux常用命令</a></li><li class="dropdown-subitem"><a href="/fe-blog/enviroment/os/mac/switch-hosts.html" class="nav-link">mac技巧</a></li></ul></li><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-blog/enviroment/deploy/normal/" class="nav-link">常规部署</a></li><li class="dropdown-subitem"><a href="/fe-blog/enviroment/deploy/cicd/" class="nav-link">CI/CD</a></li><li class="dropdown-subitem"><a href="/fe-blog/enviroment/deploy/gitlab/" class="nav-link">gitlab搭建</a></li><li class="dropdown-subitem"><a href="/fe-blog/enviroment/deploy/docker/" class="nav-link router-link-exact-active router-link-active">docker常用容器</a></li><li class="dropdown-subitem"><a href="/fe-blog/enviroment/deploy/cicd-pro/cicd.html" class="nav-link">CI/CD综合</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/fe-blog/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">微信平台</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>公众号</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-blog/wechat/serviceaccount/local-debug.html" class="nav-link">本地调试</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">javascript</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fe-blog/javascript/regexp/" class="nav-link">正则表达式</a></li><li class="dropdown-item"><!----> <a href="/fe-blog/javascript/highlights/" class="nav-link">基础集锦</a></li><li class="dropdown-item"><!----> <a href="/fe-blog/javascript/promise/" class="nav-link">promise</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">主流框架</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>vue2</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-blog/frame/vue2/source/observer.html" class="nav-link">框架源码</a></li><li class="dropdown-subitem"><a href="/fe-blog/frame/vue2/application/base.html" class="nav-link">框架应用</a></li></ul></li><li class="dropdown-item"><h4>react</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-blog/frame/react15/source/native.html" class="nav-link">react15源码</a></li><li class="dropdown-subitem"><a href="/fe-blog/frame/react16/source/fiber.html" class="nav-link">react16源码</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具环境</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-blog/enviroment/tools/git/" class="nav-link">git/git-flow</a></li><li class="dropdown-subitem"><a href="/fe-blog/enviroment/tools/node/" class="nav-link">node工具</a></li></ul></li><li class="dropdown-item"><h4>系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-blog/enviroment/os/centos/mnt.html" class="nav-link">centOS</a></li><li class="dropdown-subitem"><a href="/fe-blog/enviroment/os/centos/cmd.html" class="nav-link">linux常用命令</a></li><li class="dropdown-subitem"><a href="/fe-blog/enviroment/os/mac/switch-hosts.html" class="nav-link">mac技巧</a></li></ul></li><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/fe-blog/enviroment/deploy/normal/" class="nav-link">常规部署</a></li><li class="dropdown-subitem"><a href="/fe-blog/enviroment/deploy/cicd/" class="nav-link">CI/CD</a></li><li class="dropdown-subitem"><a href="/fe-blog/enviroment/deploy/gitlab/" class="nav-link">gitlab搭建</a></li><li class="dropdown-subitem"><a href="/fe-blog/enviroment/deploy/docker/" class="nav-link router-link-exact-active router-link-active">docker常用容器</a></li><li class="dropdown-subitem"><a href="/fe-blog/enviroment/deploy/cicd-pro/cicd.html" class="nav-link">CI/CD综合</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/fe-blog/enviroment/deploy/docker/" class="active sidebar-link">Docker常用容器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#nginx" class="sidebar-link">nginx</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#创建目录" class="sidebar-link">创建目录</a></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#配置文件" class="sidebar-link">配置文件</a></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#data目录" class="sidebar-link">data目录</a></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#前端打包方式" class="sidebar-link">前端打包方式</a></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#docker-启动命令" class="sidebar-link">docker 启动命令</a></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#访问地址" class="sidebar-link">访问地址</a></li></ul></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#gitlab" class="sidebar-link">gitlab</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#创建目录-2" class="sidebar-link">创建目录</a></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#拉取镜像" class="sidebar-link">拉取镜像</a></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#初始化gitlab容器-chinese" class="sidebar-link">初始化gitlab容器 (chinese):</a></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#初始化gitlab容器-english" class="sidebar-link">初始化gitlab容器 (english):</a></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#首次加载" class="sidebar-link">首次加载</a></li></ul></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#redis" class="sidebar-link">redis</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#创建目录-3" class="sidebar-link">创建目录</a></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#redis配置文件" class="sidebar-link">redis配置文件</a></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#初始化redis容器" class="sidebar-link">初始化redis容器</a></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#测试redis" class="sidebar-link">测试redis</a></li></ul></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#mongo" class="sidebar-link">mongo</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#创建目录-4" class="sidebar-link">创建目录</a></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#初始化运行容器" class="sidebar-link">初始化运行容器</a></li><li class="sidebar-sub-header"><a href="/fe-blog/enviroment/deploy/docker/#测试mongo" class="sidebar-link">测试mongo</a></li></ul></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker常用容器"><a href="#docker常用容器" aria-hidden="true" class="header-anchor">#</a> Docker常用容器</h1> <h2 id="nginx"><a href="#nginx" aria-hidden="true" class="header-anchor">#</a> nginx</h2> <h3 id="创建目录"><a href="#创建目录" aria-hidden="true" class="header-anchor">#</a> 创建目录</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>mkdir -p /data/nginx/{config,logs,data}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="配置文件"><a href="#配置文件" aria-hidden="true" class="header-anchor">#</a> 配置文件</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>user  nginx;
worker_processes  1;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;

    sendfile        on;
    keepalive_timeout  65;

    server{
      listen  80;

      # ip:port 或 域名
      server_name 0.0.0.0:80;

      # 比如，公众号要求 txt文件安全认证
      location ~* .(txt)$ {
        root /var/opt/nginx/txt/;
      }

      # 不缓存页面
      location /hello-world {
          alias /var/opt/nginx/hello-world/;
          add_header Last-Modified $date_gmt;
          expires -1s;
          index index.html index.htm;
          try_files $uri $uri/ /hello-world/index.html;
      }

      # 跨域请求
      location /static {
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Credentials 'true';
        add_header Access-Control-Allow-Methods 'GET, POST, OPTIONS';
        add_header Access-Control-Allow-Headers 'DNT,web-token,app-token,Authorization,Accept,Origin,Keep-Alive,User-Agent,X-Mx-ReqToken,X-Data-Type,X-Auth-Token,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range';
        add_header Access-Control-Expose-Headers 'Content-Length,Content-Range';
        if ($request_method = 'OPTIONS') {
          add_header 'Access-Control-Max-Age' 1728000;
          add_header 'Content-Type' 'text/plain; charset=utf-8';
          add_header 'Content-Length' 0;
          return 204;
        }
        root /var/opt/nginx/;
      }

      # / 放到最后
      location / {
        root /var/opt/nginx;
        index index.html index.htm;
        try_files $uri $uri/ /index.html;
      }
    }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div><h3 id="data目录"><a href="#data目录" aria-hidden="true" class="header-anchor">#</a> data目录</h3> <p>/data/nginx/data/{index.html,mobile,hello-world}</p> <h3 id="前端打包方式"><a href="#前端打包方式" aria-hidden="true" class="header-anchor">#</a> 前端打包方式</h3> <ul><li><strong>mobile</strong> 项目使用相对路径<br>
publicPath: './' （或 publicPath: ''）<br></li> <li><strong>推荐</strong> <strong>hello-world</strong> 项目使用绝对路径<br>
publicPath: '/hello-world'<br> <strong>推荐该方式</strong>，相比于<code>1</code>，可以更好地配置请求路径，如public文件夹下的文件等。</li></ul> <h3 id="docker-启动命令"><a href="#docker-启动命令" aria-hidden="true" class="header-anchor">#</a> docker 启动命令</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker run --restart=always \
  -d --name nginx \
  -p 80:80 \
  -v /Users/jasvtfvan/Documents/data/nginx/config/nginx.conf:/etc/nginx/nginx.conf:ro \
  -v /Users/jasvtfvan/Documents/data/nginx/logs:/var/log/nginx \
  -v /Users/jasvtfvan/Documents/data/nginx/data:/var/opt/nginx \
  nginx:1.14.2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="访问地址"><a href="#访问地址" aria-hidden="true" class="header-anchor">#</a> 访问地址</h3> <blockquote><p>访问地址需要使用ip</p></blockquote> <ol><li>http://192.168.3.2 =&gt; nginx首页</li> <li>http://192.168.3.2/mobile =&gt; mobile项目</li> <li>http://1926.168.3.2/hello-world =&gt; hello-world项目</li></ol> <hr> <h2 id="gitlab"><a href="#gitlab" aria-hidden="true" class="header-anchor">#</a> gitlab</h2> <h3 id="创建目录-2"><a href="#创建目录-2" aria-hidden="true" class="header-anchor">#</a> 创建目录</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>mkdir -p /data/gitlabzh/{config,logs,data}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>gitlab(8080 used by docker, cannot use 8080):</p> <h3 id="拉取镜像"><a href="#拉取镜像" aria-hidden="true" class="header-anchor">#</a> 拉取镜像</h3> <p><em><strong>运行时发现本地没有镜像，自动拉取官网镜像</strong></em></p> <ul><li>官网英文镜像
docker pull gitlab/gitlab-ce:latest</li> <li>社区中文镜像
docker pull beginor/gitlab-ce:11.3.0-ce.0</li></ul> <h3 id="初始化gitlab容器-chinese"><a href="#初始化gitlab容器-chinese" aria-hidden="true" class="header-anchor">#</a> 初始化gitlab容器 (chinese):</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo docker run --restart=always \
  --detach \
  --publish 443:443 \
  --publish 222:22 \
  --publish 8090:80 \
  --name gitlabzh \
  --restart always \
  --volume /data/gitlabzh/config:/etc/gitlabzh \
  --volume /data/gitlabzh/logs:/var/log/gitlabzh \
  --volume /data/gitlabzh/data:/var/opt/gitlabzh \
  beginor/gitlab-ce:11.3.0-ce.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="初始化gitlab容器-english"><a href="#初始化gitlab容器-english" aria-hidden="true" class="header-anchor">#</a> 初始化gitlab容器 (english):</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo docker run --restart=always \
  --detach \
  --publish 8443:443 \
  --publish 8222:22 \
  --publish 8089:80 \
  --name gitlab \
  --restart always \
  -v /data/gitlab/config:/etc/gitlab \
  --volume /data/gitlab/logs:/var/log/gitlab \
  --volume /data/gitlab/data:/var/opt/gitlab \
  gitlab/gitlab-ce:latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="首次加载"><a href="#首次加载" aria-hidden="true" class="header-anchor">#</a> 首次加载</h3> <p>首次加载需要等待初始化，因此首次开启gitlab页面很慢，请耐心等待</p> <hr> <h2 id="redis"><a href="#redis" aria-hidden="true" class="header-anchor">#</a> redis</h2> <h3 id="创建目录-3"><a href="#创建目录-3" aria-hidden="true" class="header-anchor">#</a> 创建目录</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>mkdir -p /data/redis/{conf,data}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="redis配置文件"><a href="#redis配置文件" aria-hidden="true" class="header-anchor">#</a> redis配置文件</h3> <p>默认情况不需要，如果需要编辑配置文件</p> <h3 id="初始化redis容器"><a href="#初始化redis容器" aria-hidden="true" class="header-anchor">#</a> 初始化redis容器</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo docker run --restart=always \
  -d --name redis \
  -p 6379:6379 \
  -v /data/redis/data:/var/opt/redis \
 -v /data/redis/config/redis.conf:/etc/redis/redis.conf:ro \
  redis redis-server --appendonly yes
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="测试redis"><a href="#测试redis" aria-hidden="true" class="header-anchor">#</a> 测试redis</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker exec -it redis redis-cli -h localhost -p 6379

select 1

keys *
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr> <h2 id="mongo"><a href="#mongo" aria-hidden="true" class="header-anchor">#</a> mongo</h2> <h3 id="创建目录-4"><a href="#创建目录-4" aria-hidden="true" class="header-anchor">#</a> 创建目录</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>mkdir -p /data/mongo/data
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="初始化运行容器"><a href="#初始化运行容器" aria-hidden="true" class="header-anchor">#</a> 初始化运行容器</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo docker run --restart=always \
  -d --name mongo \
  -p 27017:27017 \
  -v /data/mongo/data:/var/opt/mongo \
  mongo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="测试mongo"><a href="#测试mongo" aria-hidden="true" class="header-anchor">#</a> 测试mongo</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker exec -it mongo mongo admin
show dbs
use local
show collections
db.startup_log.find()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><hr></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/13/2021, 8:07:01 PM</span></div></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/fe-blog/assets/js/app.8a3559bf.js" defer></script><script src="/fe-blog/assets/js/2.fbf19223.js" defer></script><script src="/fe-blog/assets/js/27.b0579100.js" defer></script>
  </body>
</html>
