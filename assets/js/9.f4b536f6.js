(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{281:function(r,e,a){r.exports=a.p+"assets/img/docker-vs-vm.a2d57d15.png"},282:function(r,e,a){r.exports=a.p+"assets/img/docker-image.c73bbb5d.png"},283:function(r,e,a){r.exports=a.p+"assets/img/docker-v.89496f0a.png"},284:function(r,e,a){r.exports=a.p+"assets/img/daemon-json.c9048a30.png"},335:function(r,e,a){"use strict";a.r(e);var t=a(0),s=Object(t.a)({},(function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[t("h1",{attrs:{id:"docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker","aria-hidden":"true"}},[r._v("#")]),r._v(" Docker")]),r._v(" "),t("h2",{attrs:{id:"docker的介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker的介绍","aria-hidden":"true"}},[r._v("#")]),r._v(" Docker的介绍")]),r._v(" "),t("h3",{attrs:{id:"什么是docker-？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是docker-？","aria-hidden":"true"}},[r._v("#")]),r._v(" 什么是Docker ？")]),r._v(" "),t("p",[t("br"),t("code",[r._v("docker")]),r._v(" 是一个开源的应用容器引擎，开发者可以打包自己的应用到容器里面，然后迁移到其他机器的 "),t("code",[r._v("docker")]),r._v(" 应用中，可以实现快速部署。如果出现的故障，可以通过镜像，快速恢复服务。")]),r._v(" "),t("p",[r._v("Docker的优势在于 "),t("strong",[r._v("快速")]),r._v("，"),t("strong",[r._v("轻量，灵活。开发者可以快速制作一个自己自定义的镜像，也可以使用官方现有的镜像来启动一个服务。且容器之间相互隔离不冲突，但硬件资源又是共享的。")]),t("br"),r._v("**"),t("br"),t("strong",[r._v("镜像也可以快速分享，你可以将镜像保存为文件进行分享传输，也可以上传到镜像库进行存取和管理")]),r._v("**")]),r._v(" "),t("h3",{attrs:{id:"docker-在ci-cd中的作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-在ci-cd中的作用","aria-hidden":"true"}},[r._v("#")]),r._v(" Docker 在CI/CD中的作用")]),r._v(" "),t("ul",[t("li",[r._v("可以使用 "),t("code",[r._v("Docker")]),r._v(" 打包制品镜像")]),r._v(" "),t("li",[r._v("可以使用 "),t("code",[r._v("Docker")]),r._v(" 快速启动 "),t("code",[r._v("Jenkins")]),r._v(" "),t("code",[r._v("Gitlab")]),r._v("  等服务的容器")])]),r._v(" "),t("h3",{attrs:{id:"docker和虚拟机的区别"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker和虚拟机的区别","aria-hidden":"true"}},[r._v("#")]),r._v(" Docker和虚拟机的区别")]),r._v(" "),t("p",[t("br"),t("img",{attrs:{src:a(281),alt:"image"}})]),r._v(" "),t("ul",[t("li",[t("p",[r._v("**Docker 容器是一个应用层抽象，用于将代码和依赖资源打包在一起。 多个容器可以在同一台机器上运行，共享操作系统内核，但各自作为独立的进程在用户空间中运行。**与虚拟机相比， "),t("strong",[r._v("容器占用的空间较少")]),r._v("（容器镜像大小通常只有几十兆），"),t("strong",[r._v("瞬间就能完成启动")]),r._v(" 。")])]),r._v(" "),t("li",[t("p",[t("strong",[r._v("虚拟机 (VM) 是一个物理硬件层抽象，用于将一台服务器变成多台服务器。")]),r._v(" 管理程序允许多个 VM 在一台机器上运行。"),t("strong",[r._v("每个VM都包含一整套操作系统、一个或多个应用、必要的二进制文件和库资源，因此 占用大量空间 。而且 VM 启动也十分缓慢")]),r._v(" (知乎@Guide哥)")])])]),r._v(" "),t("h3",{attrs:{id:"镜像"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#镜像","aria-hidden":"true"}},[r._v("#")]),r._v(" 镜像")]),r._v(" "),t("p",[t("br"),r._v("Docker镜像的概念有点像我们的 “代码模版”，镜像内是一个操作系统。"),t("br"),r._v(" "),t("br"),t("strong",[r._v("镜像一般都比较小，由多个层构成")]),r._v("。我们可以看到，下图 Nginx 镜像最底层是 Ubuntu15.04 镜像，上层才是应用服务等其他层。在我们"),t("strong",[r._v("推送镜像/拉取镜像")]),r._v("时，Docker"),t("strong",[r._v("不会拉取完整镜像，只会拉取有更改的那一层")]),r._v("，这样可以做到快速更新镜像。例如下图是Nginx镜像的层级结构。"),t("br"),t("img",{attrs:{src:a(282),alt:"image"}}),t("br"),r._v("一般主流工具服务语言都有自己封装的镜像（node Jenkins gitlab nginx），当然你也可以制作自己的镜像，实现环境复用的作用。")]),r._v(" "),t("h3",{attrs:{id:"容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器","aria-hidden":"true"}},[r._v("#")]),r._v(" 容器")]),r._v(" "),t("p",[t("br"),r._v("如果说镜像是代码模版，容器就是代码模版编译后运行的文件。容器由镜像创建而来，是真正可以访问的东西。"),t("br"),r._v("我们可以将容器当作一个迷你操作系统，进行常规的操作和使用。且可以快速重启，删除创建。")]),r._v(" "),t("h3",{attrs:{id:"dockerfile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile","aria-hidden":"true"}},[r._v("#")]),r._v(" Dockerfile")]),r._v(" "),t("p",[t("br"),r._v("DockerFile 是一个镜像的描述文件，里面描述了"),t("strong",[r._v("创建一个镜像所需要的执行步骤")]),r._v("。我们也可以自定义DockerFile创建一个自己的镜像。"),t("br"),r._v(" "),t("br"),r._v("例如下面的DockerFile：")]),r._v(" "),t("div",{staticClass:"language-py line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-py"}},[t("code",[r._v("FROM nginx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(":")]),t("span",{pre:!0,attrs:{class:"token number"}},[r._v("1.15")]),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("-")]),r._v("alpine\nCOPY html "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("/")]),r._v("etc"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("/")]),r._v("nginx"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("/")]),r._v("html\nCOPY conf "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("/")]),r._v("etc"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("/")]),r._v("nginx"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("/")]),r._v("\nWORKDIR "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("/")]),r._v("etc"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("/")]),r._v("nginx"),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("/")]),r._v("html\n")])]),r._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[r._v("1")]),t("br"),t("span",{staticClass:"line-number"},[r._v("2")]),t("br"),t("span",{staticClass:"line-number"},[r._v("3")]),t("br"),t("span",{staticClass:"line-number"},[r._v("4")]),t("br")])]),t("p",[r._v("这个DockerFile可描述为："),t("br")]),r._v(" "),t("ol",[t("li",[r._v("基于 "),t("code",[r._v("nginx:1.15")]),r._v(" 镜像做底座。")]),r._v(" "),t("li",[r._v("拷贝本地 "),t("code",[r._v("html")]),r._v(" 文件夹内的文件，到 镜像内 "),t("code",[r._v("/etc/nginx/html")]),r._v(" 文件夹。")]),r._v(" "),t("li",[r._v("拷贝本地 "),t("code",[r._v("conf")]),r._v(" 文件夹内的文件，到 镜像内 "),t("code",[r._v("/etc/nginx/")]),r._v("  文件夹。")])]),r._v(" "),t("p",[t("br"),r._v("怎么生成镜像呢？我们只需要使用 "),t("code",[r._v("docker build")]),r._v(" 命令就可以生成了：")]),r._v(" "),t("div",{staticClass:"language-py line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-py"}},[t("code",[r._v("docker build "),t("span",{pre:!0,attrs:{class:"token operator"}},[r._v("-")]),r._v("t imagename"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(":")]),r._v("version "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[r._v(".")]),r._v("\n")])]),r._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[r._v("1")]),t("br")])]),t("blockquote",[t("p",[r._v("-t: 声明要打tag标签，后面就是标签\n. ：声明要寻找dockerfile文件的路径。“.” 代表当前路径下寻找")])]),r._v(" "),t("p",[t("br"),r._v("关于DockerFile的语法，可以看这里 "),t("a",{attrs:{href:"https://www.runoob.com/docker/docker-dockerfile.html",target:"_blank",rel:"noopener noreferrer"}},[r._v("https://www.runoob.com/docker/docker-dockerfile.html"),t("OutboundLink")],1),r._v("。网络上也有很多类似的教程")]),r._v(" "),t("h3",{attrs:{id:"常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常用命令","aria-hidden":"true"}},[r._v("#")]),r._v(" 常用命令")]),r._v(" "),t("p",[t("br"),t("a",{attrs:{href:"https://www.runoob.com/docker/docker-container-usage.html",target:"_blank",rel:"noopener noreferrer"}},[r._v("https://www.runoob.com/docker/docker-container-usage.html"),t("OutboundLink")],1)]),r._v(" "),t("h2",{attrs:{id:"安装-docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker","aria-hidden":"true"}},[r._v("#")]),r._v(" 安装 Docker")]),r._v(" "),t("h3",{attrs:{id:"_1-安装所需依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装所需依赖","aria-hidden":"true"}},[r._v("#")]),r._v(" 1. 安装所需依赖")]),r._v(" "),t("p",[t("br"),r._v("在安装Docker之前，需要安装 "),t("code",[r._v("device-mapper-persistent-data")]),r._v(" 和 "),t("code",[r._v("lvm2")]),r._v(" 两个依赖："),t("br"),r._v(" "),t("br"),r._v("我们使用使用 "),t("code",[r._v("Yum")]),r._v(" 命令安装依赖：")]),r._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[r._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[r._v("install")]),r._v(" -y yum-utils device-mapper-persistent-data lvm2\n")])]),r._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[r._v("1")]),t("br")])]),t("blockquote",[t("p",[r._v("device-mapper-persistent-data: 存储驱动，Linux上的许多高级卷管理技术\nlvm: 逻辑卷管理器，用于创建逻辑磁盘分区使用")])]),r._v(" "),t("h3",{attrs:{id:"_2-使用阿里云源安装docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用阿里云源安装docker","aria-hidden":"true"}},[r._v("#")]),r._v(" 2. 使用阿里云源安装Docker")]),r._v(" "),t("p",[t("br"),r._v("接下来，添加阿里云的Docker镜像源，加速Docker的安装")]),r._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[r._v("sudo")]),r._v(" yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\nyum "),t("span",{pre:!0,attrs:{class:"token function"}},[r._v("install")]),r._v(" docker-ce\n")])]),r._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[r._v("1")]),t("br"),t("span",{staticClass:"line-number"},[r._v("2")]),t("br")])]),t("h3",{attrs:{id:"_3-启动docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-启动docker","aria-hidden":"true"}},[r._v("#")]),r._v(" 3. 启动Docker")]),r._v(" "),t("p",[t("br"),r._v("使用 "),t("code",[r._v("systemctl")]),r._v(" 启动Docker")]),r._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[r._v("systemctl start docker\nsystemctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[r._v("enable")]),r._v(" docker\n")])]),r._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[r._v("1")]),t("br"),t("span",{staticClass:"line-number"},[r._v("2")]),t("br")])]),t("h3",{attrs:{id:"_4-验证安装成功"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-验证安装成功","aria-hidden":"true"}},[r._v("#")]),r._v(" 4. 验证安装成功")]),r._v(" "),t("p",[t("br"),r._v("执行 "),t("code",[r._v("docker -v")]),r._v(" ，如果展示以下信息，代表安装成功。"),t("br"),r._v(" "),t("br"),t("img",{attrs:{src:a(283),alt:"image"}}),t("br")]),r._v(" "),t("h3",{attrs:{id:"_5-配置阿里云源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-配置阿里云源","aria-hidden":"true"}},[r._v("#")]),r._v(" 5. 配置阿里云源")]),r._v(" "),t("p",[t("br"),r._v("我们拉取Docker镜像时，一般默认会去 Docker 官方源拉取镜像。但是国内出海网速实在是太慢，所以我们更换为 "),t("code",[r._v("阿里云镜像仓库")]),r._v(" 源进行镜像下载加速"),t("br"),r._v(" "),t("br"),r._v("登录阿里云官网，打开 "),t("a",{attrs:{href:"https://cr.console.aliyun.com",target:"_blank",rel:"noopener noreferrer"}},[r._v("阿里云容器镜像服务"),t("OutboundLink")],1),r._v("。点击左侧菜单最下面的 "),t("code",[r._v("镜像加速器")]),r._v(" ，选择 "),t("code",[r._v("Centos")]),r._v(" （如下图）"),t("br"),r._v(" "),t("br"),t("img",{attrs:{src:a(284),alt:"image"}}),t("br"),r._v(" "),t("br"),r._v("按照官网的提示，执行命令，即可实现更换Docker镜像源地址"),t("br")])])}),[],!1,null,null,null);e.default=s.exports}}]);